<?xml version="1.0"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ace="http://www.icefaces.org/icefaces/components"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	template="/WEB-INF/templates/templateBase.xhtml">

	<ui:param name="pageTitle" value="#{msg.relatorioSaldoBh}" />

	<ui:define name="pageContent">
		
		<h:form id="filtrosRelatorio" styleClass="centralized-form" style="margin-bottom: 15px;">
			<fieldset>
				<legend>#{msg.filtros}</legend>
				<h:panelGrid columns="2" style="margin-left: 50px;">
					<h:outputLabel value="#{msg.colaborador}" />
					<h:selectOneMenu value="#{relSaldoBh.colaboradorSelecionado}">
						<f:selectItems value="#{relSaldoBh.colaboradores}" />
					</h:selectOneMenu>
					
					<h:outputLabel value="#{msg.dataInicial}" />
					<ace:dateTimeEntry value="#{relSaldoBh.dataInicial}" locale="pt-BR" timezone="America/Sao_Paulo" pattern="dd/MM/yyyy"
						renderAsPopup="true" navigator="true" maxdate="#{relSaldoBh.maxDate}" />
						
					<h:outputLabel value="#{msg.dataFinal}" />
					<ace:dateTimeEntry value="#{relSaldoBh.dataFinal}" locale="pt-BR" timezone="America/Sao_Paulo" pattern="dd/MM/yyyy"
						renderAsPopup="true" navigator="true" maxdate="#{relSaldoBh.maxDate}" />
						
					<h:commandButton value="#{msg.gerar}" action="#{relSaldoBh.gerarRelatorio}" />
				</h:panelGrid>
				
				<ace:messages />
			</fieldset>
		</h:form>
		
		<h:form id="dadosRelatorio" rendered="#{relSaldoBh.listouRelatorio}" styleClass="centralized-form bordered-form">
			<h:panelGroup rendered="#{!relSaldoBh.existemDadosListar}">
				<p class="text-center"><h:outputText value="#{msg.msgNaoHaDadosListar}" /></p>
			</h:panelGroup>
			
			<h:panelGrid rendered="#{relSaldoBh.existemDadosListar}" style="width: 100%;">
				<h1 class="titulo-relatorio">#{msg.tituloRelatorioSaldoBh}</h1>
				<h:outputText value="#{msg.periodo}: #{relSaldoBh.dataInicialFormatada} #{msg.ate} #{relSaldoBh.dataFinalFormatada}" style="margin-bottom: 15px;" />
				
				<ui:repeat var="saldo" value="#{relSaldoBh.saldosBh}">
				<p style="margin-bottom: 5px;"><strong>#{msg.colaborador}:</strong> #{saldo.colaborador.nome}</p>
				<table class="table-report" style="margin-bottom: 15px;">
					<thead>
						<tr>
							<th class="ui-widget-header">#{msg.totalizador}</th>
							<th class="ui-widget-header">#{msg.valor}</th>
						</tr>
					</thead>
					<tbody>
						
							<tr><th>#{msg.bancoHoras} (+)</th><td class="text-right">#{relSaldoBh.getHoraFormatada(saldo.entradasBH)}</td></tr>
							<tr><th>#{msg.bancoHoras} (-)</th><td class="text-right">#{relSaldoBh.getHoraFormatada(saldo.saidasBH)}</td></tr>
							<tr><th>#{msg.ajustesManuaisBH}</th><td class="text-right">#{relSaldoBh.getHoraFormatada(saldo.ajustesManuaisBH)}</td></tr>
							<tr><th>#{msg.saldoInicialPeriodo}</th><td class="text-right">#{relSaldoBh.getHoraFormatada(saldo.saldoInicialPeriodo)}</td></tr>
							<tr><th>#{msg.saldoFinalPeriodo}</th><td class="text-right">#{relSaldoBh.getHoraFormatada(saldo.saldoFinalPeriodo)}</td></tr>
						
					</tbody>
				</table>
				</ui:repeat>
			</h:panelGrid>
		</h:form>
		
	</ui:define>
</ui:composition>