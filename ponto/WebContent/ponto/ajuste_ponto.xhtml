<?xml version="1.0"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ace="http://www.icefaces.org/icefaces/components"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	template="/WEB-INF/templates/templateBase.xhtml">

	<ui:param name="pageTitle" value="#{msg.ajustePonto}" />

	<ui:define name="pageContent">
		<ice:outputStyle href="/ponto/css/ajustePonto.css" />
		
		<h:form styleClass="bordered-form main-form">
			<h:outputLabel value="#{msg.colaborador}" />
			<h:selectOneMenu value="#{ajustePonto.codColabSelecionado}" styleClass="side-margin select-colabs">
				<f:selectItems value="#{ajustePonto.colaboradores}" />
			</h:selectOneMenu>
			
			<h:outputLabel value="#{msg.periodo}" />
			<ace:dateTimeEntry value="#{ajustePonto.dataInicial}" locale="pt-BR" timezone="America/Sao_Paulo" pattern="dd/MM/yyyy"
						renderAsPopup="true" navigator="true" maxdate="#{ajustePonto.maxDate}" styleClass="side-margin"
						required="true" requiredMessage="#{msg.msgInformeDataInicial}" />
			<h:outputLabel value="#{msg.ate}" />
			<ace:dateTimeEntry value="#{ajustePonto.dataFinal}" locale="pt-BR" timezone="America/Sao_Paulo" pattern="dd/MM/yyyy"
						renderAsPopup="true" navigator="true" maxdate="#{ajustePonto.maxDate}" styleClass="side-margin"
						required="true" requiredMessage="#{msg.msgInformeDataFinal}" />
						
			<h:outputLabel value="#{msg.apenasExcecoes}">
			<h:selectBooleanCheckbox value="#{ajustePonto.apenasExcecoes}" />
			</h:outputLabel>
			
			<h:commandButton value="#{msg.buscar}" action="#{ajustePonto.buscaApuracoes}" />
			
			<ace:messages />
			
			<ace:dataTable rendered="#{ajustePonto.buscouApuracoes}" value="#{ajustePonto.apuracoesPonto}" var="apuracaoPonto" 
				style="margin-top: 15px;">
				<ace:column headerText="#{msg.data}" style="width: 125px;">
					<h:outputText value="#{apuracaoPonto.diaMes}" /><br />
					<h:outputText value="#{apuracaoPonto.diaSemana}" />
				</ace:column>
				
				<ace:column headerText="#{msg.marcacoes}" style="text-align: left;">
					<ui:repeat var="marcacao" value="#{apuracaoPonto.marcacoes}">
						<h:outputText value="#{marcacao}" style="margin-right: 5px;" />
					</ui:repeat>
				</ace:column>
				<ace:column headerText="#{msg.situacoes}" style="text-align: left;">
					<ui:repeat value="#{apuracaoPonto.ocorrencias}" var="ocorrencia" varStatus="status">
						<h:outputText value="#{ocorrencia}" style="display: block; margin-bottom: 5px;" />
					</ui:repeat>
				</ace:column>
				
				<ace:column headerText="#{msg.acao}">
					<h:outputText value="---" />
				</ace:column>
			</ace:dataTable>
		</h:form>
		
	</ui:define>
</ui:composition>